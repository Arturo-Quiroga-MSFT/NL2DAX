# üìä NL2DAX Pipeline Execution Report

**Generated:** August 15, 2025 at 12:01:16 PM
**Query:** Show me comprehensive customer analysis grouped by type

---

## üìã Executive Summary

| Metric | Value |
|--------|--------|
| **SQL Execution** | ‚ùå Failed |
| **DAX Execution** | ‚úÖ Success |
| **SQL Rows Returned** | 0 |
| **DAX Rows Returned** | 2 |
| **Total Execution Time** | 0.00s |
| **Errors Encountered** | 1 |

## üîç Query Analysis

**Original Query:** `Show me comprehensive customer analysis grouped by type`

| Attribute | Value |
|-----------|--------|
| **Character Count** | 55 |
| **Word Count** | 8 |
| **Detected Features** | Grouping Words |

## üß† Intent & Entity Extraction

### Extracted Intent and Entities

```json
{
  "intent": "show_comprehensive_customer_analysis",
  "entities": {
    "table": "customers",
    "analysis_type": "comprehensive",
    "group_by": "type"
  }
}
```

## üöÄ Cache Performance

| Cache Type | Hits | Misses | Hit Rate |
|------------|------|--------|----------|
| **Intent Parsing** | 0 | 0 | N/A% |
| **SQL Generation** | 0 | 0 | N/A% |
| **DAX Generation** | 0 | 0 | N/A% |

## üóÑÔ∏è SQL Generation & Execution

### Generated SQL Query

```sql
SELECT 
        CUSTOMER_KEY,
        COUNT(DISTINCT LOAN_ID) AS LoanCount,
        SUM(EXPOSURE_AT_DEFAULT) AS TotalLoanEAD,
        AVG(PROBABILITY_OF_DEFAULT) AS AvgLoanPD
    FROM FIS_CL_DETAIL_FACT
    GROUP BY CUSTOMER_KEY
),
LimitMetrics AS (
    SELECT 
        CUSTOMER_KEY,
        SUM(LIMIT_AMOUNT) AS TotalCommitment,
        SUM(EXPOSURE_AT_DEFAULT) AS TotalLimitEAD,
        AVG(PROBABILITY_OF_DEFAULT) AS AvgLimitPD
    FROM FIS_CA_DETAIL_FACT
    GROUP BY CUSTOMER_KEY
)
SELECT
    c.CUSTOMER_TYPE_DESCRIPTION AS CustomerType,
    COUNT(DISTINCT c.CUSTOMER_KEY) AS CustomerCount,
    SUM(ISNULL(lm.LoanCount,0)) AS TotalLoans,
    SUM(ISNULL(lm.TotalLoanEAD,0)) AS TotalLoanEAD,
    AVG(lm.AvgLoanPD) AS AvgLoanPD,
    SUM(ISNULL(lm.TotalLoanEAD,0)) + SUM(ISNULL(lim.TotalLimitEAD,0)) AS TotalEAD,
    SUM(ISNULL(lim.TotalLimitEAD,0)) AS TotalLimitEAD,
    SUM(ISNULL(lim.TotalCommitment,0)) AS TotalCommitment,
    AVG(lim.AvgLimitPD) AS AvgLimitPD,
    COUNT(CASE WHEN c.RISK_RATING_CODE LIKE 'A%' THEN 1 END) AS ARatingCount,
    COUNT(CASE WHEN c.RISK_RATING_CODE LIKE 'B%' THEN 1 END) AS BRatingCount
FROM FIS_CUSTOMER_DIMENSION c
LEFT JOIN LoanMetrics lm ON c.CUSTOMER_KEY = lm.CUSTOMER_KEY
LEFT JOIN LimitMetrics lim ON c.CUSTOMER_KEY = lim.CUSTOMER_KEY
GROUP BY c.CUSTOMER_TYPE_DESCRIPTION
ORDER BY c.CUSTOMER_TYPE_DESCRIPTION;
```

### SQL Execution Results

‚ùå **Execution Failed** - See error analysis section for details

## ‚ö° DAX Generation & Execution

### Generated DAX Query

```dax
EVALUATE
SUMMARIZECOLUMNS(
    'FIS_CUSTOMER_DIMENSION'[CUSTOMER_TYPE_DESCRIPTION],
    "Customer Count", DISTINCTCOUNT('FIS_CUSTOMER_DIMENSION'[CUSTOMER_KEY]),
    "Total Credit Arrangement Limit Amount", CALCULATE(SUM('FIS_CA_DETAIL_FACT'[LIMIT_AMOUNT])),
    "Total Credit Arrangement Limit Used", CALCULATE(SUM('FIS_CA_DETAIL_FACT'[LIMIT_USED])),
    "Total Commercial Loan Principal Balance", CALCULATE(SUM('FIS_CL_DETAIL_FACT'[PRINCIPAL_BALANCE])),
    "Total Fees Charged YTD", CALCULATE(SUM('FIS_CA_DETAIL_FACT'[FEES_CHARGED_YTD])),
    "Total Exposure at Default", CALCULATE(SUM('FIS_CA_DETAIL_FACT'[EXPOSURE_AT_DEFAULT])),
    "Total Charge Off Amount", CALCULATE(SUM('FIS_CL_DETAIL_FACT'[CHARGE_OFF_AMOUNT]))
    )
```

### DAX Execution Results

**Rows Returned:** 2
**Execution Time:** 0.00 seconds

**DAX Results (First 5 Rows)**

| FIS_CUSTOMER_DIMENSION[CUSTOMER_TYPE_DESCRIPTION] | [Customer Count] | [Total Credit Arrangement Limit Amount] | [Total Credit Arrangement Limit Used] | [Total Commercial Loan Principal Balance] | [Total Fees Charged YTD] | [Total Exposure at Default] | [Total Charge Off Amount] |
| --- | --- | --- | --- | --- | --- | --- | --- |
| Corporation | 7 | 11000000.0 | 4750000.0 | 9050000.0 | 203875.0 | 8250000.0 | 0.0 |
| Limited Liability Company | 3 | 11000000.0 | 4750000.0 | 9050000.0 | 203875.0 | 8250000.0 | 0.0 |

## ‚è±Ô∏è Performance Metrics

| Operation | Time (seconds) | Percentage |
|-----------|----------------|------------|
| **SQL Generation & Execution** | 0.00s | 0.0% |
| **DAX Generation & Execution** | 0.00s | 0.0% |
| **Total Pipeline Time** | 0.00s | 100% |

## ‚ö†Ô∏è Error Analysis

**Total Errors:** 1

### Error 1

```
SQL Execution Error: ('42000', "[42000] [Microsoft][ODBC Driver 18 for SQL Server][SQL Server]Incorrect syntax near ')'. (102) (SQLExecDirectW)")
```

## üí° Recommendations

- DAX execution successful but SQL failed - check database connection

---

*Report generated by NL2DAX Pipeline v1.0*

*Generated on August 15, 2025 at 12:01:16 PM*